import{_ as t}from"./_plugin-vue_export-helper.cdc0426e.js";import{o,c as i,e as l,a as e,b as s,f as r,d as a,r as c}from"./app.a9fc3e83.js";const p={},d=e("p",null,"Volatile \u4F7F\u7528\u65B9\u6CD5",-1),u=r(`<h1 id="_2022-09-28-volatile" tabindex="-1"><a class="header-anchor" href="#_2022-09-28-volatile" aria-hidden="true">#</a> 2022-09-28 volatile</h1><h2 id="volatile" tabindex="-1"><a class="header-anchor" href="#volatile" aria-hidden="true">#</a> volatile</h2><p>Here we will see what is the meaning of volatile qualifier in C++. The volatile qualifier is applied to a variable when we declare it. It is used to tell the compiler, that the value may change at any time. These are some properties of volatile.</p><ul><li>The volatile keyword cannot remove the memory assignment.</li><li>It cannot cache the variables in register.</li><li>The value cannot change in order of assignment.</li></ul><p>Let us see, how we can use the volatile keyword.</p><div class="language-cpp ext-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">volatile</span> <span class="token keyword">int</span> a<span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token keyword">volatile</span> a<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>Here these two declarations are correct. Like other datatypes, we can use volatile pointers, structures, unions etc. The volatile structures and unions can be volatile itself, and their member variables can also be of type volatile.</p><p>The volatile is used in different places. For memory mapped peripheral registers, some global variables, that are accessed by some other functions or interrupt service routines, or in some multi-threaded applications, the volatile can be used.</p><p>Example</p><div class="language-cpp ext-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">int</span> <span class="token function">main</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">int</span> value<span class="token punctuation">;</span>
    value<span class="token operator">++</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">volatile</span> <span class="token keyword">int</span> value<span class="token punctuation">;</span>
  value<span class="token operator">++</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>There are two blocks of code. In the first block the volatile keyword is not present. So for the first case, the variable will be copied from memory to CPU register, then the operations are performed. In the second case the volatile is present. So in this case the variable will not be copied from memory to registers.</p>`,11),h=a("\u6587\u7AE0\u94FE\u63A5\uFF1A "),v={href:"https://www.tutorialspoint.com/what-is-volatile-keyword-in-cplusplus",target:"_blank",rel:"noopener noreferrer"},m=a("https://www.tutorialspoint.com/what-is-volatile-keyword-in-cplusplus"),k=e("h2",{id:"volatile-\u548C-atomic-\u7684\u533A\u522B",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#volatile-\u548C-atomic-\u7684\u533A\u522B","aria-hidden":"true"},"#"),a(" volatile \u548C atomic<>\u7684\u533A\u522B")],-1),_=e("p",null,"volatile \u4EC5\u4EC5\u662F\u963B\u6B62\u4E86\u7F16\u8BD1\u5668\u7684\u987A\u5E8F\u4F18\u5316\uFF0C\u4F46\u662F\u4F9D\u7136\u6709\u53EF\u80FD\u88AB\u786C\u4EF6\u5C42\u9762\u4F18\u5316\u3002\u5982\u679C\u8981\u4E24\u4E2A\u5C42\u9762\u4F18\u5316\u90FD\u963B\u6B62\uFF0C\u9700\u8981\u4F7F\u7528 atomic",-1),b=e("p",null,"\u4E24\u79CD\u4F18\u5316\u5206\u522B\u662F",-1),w=e("ul",null,[e("li",null,"compiler - compiler can reorder / delay / cache variables in registers"),e("li",null,"hardware - CPU can reorder read/write as long as the end result should be the same")],-1),f=a("\u53C2\u8003\u6587\u7AE0\uFF1A "),y={href:"https://yizhang82.dev/atomic-vs-volatile-x86",target:"_blank",rel:"noopener noreferrer"},g=a("https://yizhang82.dev/atomic-vs-volatile-x86");function x(T,I){const n=c("ExternalLinkIcon");return o(),i("div",null,[d,l(" more "),u,e("p",null,[h,e("a",v,[m,s(n)])]),k,_,b,w,e("p",null,[f,e("a",y,[g,s(n)])])])}const N=t(p,[["render",x],["__file","20220928_note.html.vue"]]);export{N as default};
